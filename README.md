# STM32F4 Starter Project

## Overview
* This repository contains src where the source files are located, include where the headers will be put into.
* OpenOCD will generate a *flash* target for an easier use for developing microcontrollers (like the STM32F4xx)
* This will also generate an Intel HEX file (*.hex*), a binary file (*.bin*), a map file (*.map*) generated by the linker and an assembler listing file intermixed with C code (*.lss*) - besides the obvious *.elf* file.
* Reference to the link for compiling the project, [GNU ARM Embedded Toolchain](https://developer.arm.com/open-source/gnu-toolchain/gnu-rm)


## Build
* To run CMake do \
`mkdir build && cd build` \
* Then run,
`cd build && cmake -G "Unix Makefiles" -D "CMAKE_TOOLCHAIN_FILE=../CMake/GNU-ARM-Toolchain.cmake" ..`
* To flash the code to the STM32F4xx microcontroller do `make flash` for flashing using OpenOCD.
* Keep in mind ST-Link on STM32F4Discovery is assumed.



## Debugging

The target `ocd_serve` runs OpenOCD against the target and serves an interface for GDB
to connect to on a local port. This uses the same ST-Link configuration as the `flash` target.

The target `gdb_connect` runs the ARM GDB against this port and provides a live debugger
for the program running on the device.

# Resources
Links to reference to when dealing with CMake and STM32F4xx.
- [STM32-CMake-CodeSourcery](https://github.com/adrienbailly/STM32-CMake-CodeSourcery)
- [STM32F4 Discovery board project template](https://github.com/charleskorn/stm32f4-project-template)
